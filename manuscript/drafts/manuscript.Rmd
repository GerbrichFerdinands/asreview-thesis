---
title: "parameters"
author: "Gerbrich Ferdinands"
date: "1/14/2020"
output: pdf_document
bibliography: asreview.bib
---
```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE)

library(tidyverse)
library(knitr)
library(xtable)
library(kableExtra)
# load model parameters 
source("asr-parameters.R")
```


```{r}
# configurations table 
tab <- lapply(words, FUN = function(x) paste(x, collapse = ", "))
tab <- do.call(rbind, tab)
colnames(tab) <- c("Configurations")

```

```{r}
# combinations table
combins <- expand.grid(params) %>%
  arrange(model, feature_extraction)

# rows to drop
droprows <- combins$model == "nb" & combins$feature_extraction != "tfidf"
combins <- combins[!droprows, ]
``` 

ASReview takes the following parameters/arguments: 

- a model
- a query strategy
- a balance strategy (fixed)
- a feature extraction strategy
- number of training data 

The goal: 
Use these inputs to predict relevance of papers. 

Numerical representation of texts
To perform a learning algorithm on the abstract, the content of the abstracts needs to be represented numerical.
To perform learning algorithms on the abstracts, their content has to be represented in a numerical way. 
This is done by transforming the textual content of the abstracts into numerical feature vectors. 
A classical example representation of texts is by 'bag of words' features, where for each text the number of occurrences of each word is stored. This leads to n features, where n is the number of distinct words in the texts. [@scikit-learn]

ASReview implements several feature extraction strategies. The following will be compared: 

* Doc2Vec [@Le2014]
* Tfidf 
* SBERT
* embeddingIdf

The model is typically a learning algorithm used to predict the relevance of text.
The following models will be compared: 

* Naive Bayes 
* Random Forests
* Support Vector Machine 
* Logistic Regression 
* **Dense Neural Network** 

Active learning = 
increasing classification performance with every query. 
The query strategy determines the way unlabeled papers are queried to the researcher. 

[@modAL2018]

The balance strategy 


```{r}
kable(tab, "latex", booktabs = TRUE) %>%
  kable_styling(full_width = FALSE) %>%
  column_spec(2, width = "30em") 
```

## Models 
### Naive Bayes 
Naive Bayes assumes all features are independent given the class value. [@Zhang2004] 

ASReview uses the ` MultinomialNB` from the scikit-learn package [@scikit-learn], that implements the naive Bayes algorithm for multinomially distributed data. 
` nb`

Hyperparameters

  * alpha - accounts for features not present in learning samples and prevents zero probabilities in further computations. 

### Random Forests

### Support Vector Machine

### Logistic Regression 

### *Dense Neural Network*

## Query Strategies 
* Max - Choose the most likely samples to be included according to the model
* Uncertainty - choose the most uncertain samples according to the model (i.e. closest to 0.5 probability) [@Lewis1994] 
* Random - randomly selects abstracts with no regard to model assigned probabilities. 
* Cluster - Use clustering after feature extraction on the dataset. Then the highest probabilities within random clusters are sampled

The following combinations are simulated: 

* cluster
* max
* cluster * random 
* cluster * uncertainty
* max * cluster
* max * random
* max * uncertainty

## Balance Strategies 

## Feature Extraction Strategies 

## amount of training data
n_instances = number of papers queried each query
n_queries = number of queries
n_prior_included: 5
n_prior_excluded: 

# Combinations 

This leads to  `r nrow(combins)` combinations of configurations. 

- Naive bayes only goes with tfidf feature extraction.
- For the feature extraction strategies we will focus on doc2vec and tfidf. (but will compute all 4)
- This leads to 3 * 7  * 4 * 3 + 1 * 7 * 1 * 3 =  273 combinations. 

```{r}
names(combins) <- c("Model", "Query Strategy", "Feature extraction strategy", "Training data [included/excluded]")
combins %>%
  kable(row.names = FALSE, format = "latex", longtable = TRUE, booktabs = TRUE) %>%
  kable_styling(latex_options = c("repeat_header")) 
```


# References 