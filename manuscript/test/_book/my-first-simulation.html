<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 My first simulation | A Minimal Book Example</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.17.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 My first simulation | A Minimal Book Example" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 My first simulation | A Minimal Book Example" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Yihui Xie" />


<meta name="date" content="2020-02-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="methods.html"/>
<link rel="next" href="appendix-a.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Frontpage</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="literature.html"><a href="literature.html"><i class="fa fa-check"></i><b>3</b> Literature</a></li>
<li class="chapter" data-level="4" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>4</b> Methods</a></li>
<li class="chapter" data-level="5" data-path="my-first-simulation.html"><a href="my-first-simulation.html"><i class="fa fa-check"></i><b>5</b> My first simulation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="my-first-simulation.html"><a href="my-first-simulation.html#methods-1"><i class="fa fa-check"></i><b>5.1</b> Methods</a></li>
<li class="chapter" data-level="5.2" data-path="my-first-simulation.html"><a href="my-first-simulation.html#results"><i class="fa fa-check"></i><b>5.2</b> Results</a>
<ul>
<li class="chapter" data-level="5.2.0.1" data-path="my-first-simulation.html"><a href="my-first-simulation.html#inclusions"><i class="fa fa-check"></i><b>5.2.0.1</b> Inclusions</a></li>
<li class="chapter" data-level="5.2.0.2" data-path="my-first-simulation.html"><a href="my-first-simulation.html#discovery"><i class="fa fa-check"></i><b>5.2.0.2</b> Discovery</a></li>
<li class="chapter" data-level="5.2.0.3" data-path="my-first-simulation.html"><a href="my-first-simulation.html#limits"><i class="fa fa-check"></i><b>5.2.0.3</b> Limits</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="my-first-simulation.html"><a href="my-first-simulation.html#console-output"><i class="fa fa-check"></i><b>5.3</b> Console output</a></li>
<li class="chapter" data-level="5.4" data-path="my-first-simulation.html"><a href="my-first-simulation.html#notes"><i class="fa fa-check"></i><b>5.4</b> Notes</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="my-first-simulation.html"><a href="my-first-simulation.html#possible-research-questions"><i class="fa fa-check"></i><b>5.4.1</b> Possible Research Questions</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-a.html"><a href="appendix-a.html"><i class="fa fa-check"></i><b>A</b> Appendix A</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Minimal Book Example</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="my-first-simulation" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> My first simulation</h1>
<div id="methods-1" class="section level2">
<h2><span class="header-section-number">5.1</span> Methods</h2>
<p>A simulation study was performed on the Nagtegaal dataset, using a model with the following configurations:</p>
<ul>
<li>Model = Naive Bayes</li>
<li>Query Strategy = max_random</li>
<li>Balance Strategy = Double</li>
<li>n_instances=10 (number of papers each query)</li>
<li>n_papers=2000 (shouldn’t I do all?)</li>
<li>n_prior_included = 5</li>
<li>n_prior_excluded = 5</li>
<li>mix_ratio = 0.95 (95% max, 5% random)</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Hyperparameters</th>
<th></th>
<th>default</th>
<th>optimized</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Model</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>alpha</td>
<td>3.822</td>
<td>3.511844</td>
<td></td>
</tr>
<tr class="odd">
<td>Balance</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>a</td>
<td>2.155</td>
<td>0.254892</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>alpha</td>
<td>0.94</td>
<td>1.459081</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>b</td>
<td>0.789</td>
<td>0.394437</td>
<td></td>
</tr>
<tr class="odd">
<td>Feature</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>ngram_max</td>
<td>1</td>
<td>2</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>split_ta</td>
<td>0</td>
<td>1</td>
<td></td>
</tr>
</tbody>
</table>
<p>For the sake of evaluating the optimized hyperparameters, two simulations of five runs each were compared: one with default hyperparameters and with optimized hyperparameters.</p>
</div>
<div id="results" class="section level2">
<h2><span class="header-section-number">5.2</span> Results</h2>
<p>Explanation of the plots come from the <code>asreview-visualization</code> repository.
The optimized hyperparameters do not perform better than the default ones, this is probably due to the fact that the default hyperparameters have already been optimized in the past. It is therefore to know for which models this has already been done and which not!</p>
<div style="page-break-after: always;"></div>
<div id="inclusions" class="section level4">
<h4><span class="header-section-number">5.2.0.1</span> Inclusions</h4>
<p>This figure shows the number/percentage of included papers found as a function of the
number/percentage of papers reviewed. Initial included/excluded papers are subtracted so that the line
always starts at (0,0).</p>
<p>The quicker the line goes to a 100%, the better the performance.</p>
<p><img src="figs/myfirstsim/Figure_1.png" /><!-- --></p>
<p>In the beginning, the model with default parameters finds inclusions quicker than the model with optimized hyperparamters.
Only after reviewing 50% of the papers, the optimized hyperparameters outperform the default ones.</p>
<div style="page-break-after: always;"></div>
</div>
<div id="discovery" class="section level4">
<h4><span class="header-section-number">5.2.0.2</span> Discovery</h4>
<p>This figure shows the distribution of the number of papers that have to be read before discovering
each inclusion. Not every paper is equally hard to find.</p>
<p>The closer to the left, the better.</p>
<p><img src="figs/myfirstsim/Figure_2.png" /><!-- --></p>
<div style="page-break-after: always;"></div>
</div>
<div id="limits" class="section level4">
<h4><span class="header-section-number">5.2.0.3</span> Limits</h4>
<p>This figure shows how many papers need to be read with a given criterion. A criterion is expressed
as “after reading <em>y</em> % of the papers, at most an average of <em>z</em> included papers have been not been
seen by the reviewer, if he is using max sampling.”. Here, <em>y</em> is shown on the y-axis, while
three values of <em>z</em> are plotted as three different lines with the same color. The three values for
<em>z</em> are 0.1, 0.5 and 2.0.</p>
<p>The quicker the lines touch the black (<code>y=x</code>) line, the better.</p>
<p><img src="figs/myfirstsim/Figure_3.png" /><!-- --></p>
<div style="page-break-after: always;"></div>
</div>
</div>
<div id="console-output" class="section level2">
<h2><span class="header-section-number">5.3</span> Console output</h2>
<p>3120 iterations ran overnight.</p>
<p><img src="figs/myfirstsim/computation.png" /><!-- -->
2191 was best performing with a loss of 0.1124</p>
<p><img src="figs/myfirstsim/optmizationresult.png" /><!-- --></p>
</div>
<div id="notes" class="section level2">
<h2><span class="header-section-number">5.4</span> Notes</h2>
<ul>
<li><p>Optimizing the hyperparameters with the Nagtegaal set and then running a simulation on the Nagtegaal dataset is using the data twice.
This leads to overfitting. A next approach could be to perform some way of cross-validation, e.g. split the datasets in train and test datasets.</p></li>
<li><p>There are two main optimization modes: passive and active learning.
The first is used here and is relatively fast, the second is more computationally expensive.</p></li>
<li><p>Of primary interest is the comparison of different model configurations in predictive performance.
A simulation study can be performed with all possible configurations using the default hyperparameters.
The results could be used to select model configurations that could possibly benefit from hyperparameter sreening.</p></li>
<li><p>Second, we could investigate how much is to gain in predictive performance from optimizing the hyperparameters.
For this, some cross-validation strategy should be used.
Optimization can consist of two steps:
first, optimization through passive learning can be performed, from which the best performing models can be selected for the second step:
optimization through passive learning.</p></li>
</ul>
<div id="possible-research-questions" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Possible Research Questions</h3>
<ul>
<li>Which model configurations have good predictive performance?
<ul>
<li>for what kind of data sets and under which circumstances?</li>
</ul></li>
<li>Does optimization of hyperparameters lead to substantial gain in predictive performance?
<ul>
<li>How much and why?</li>
<li>How do the hyperparameters relate to one another?</li>
<li>What is the optimal way to tune the hyperparameters?
<ul>
<li>to determine by cross-validation</li>
<li>for example: optimize over a large number of datasets? or a different strategy?</li>
</ul></li>
</ul></li>
<li>…</li>
<li>…</li>
</ul>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="methods.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix-a.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04-simulation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.docx"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
